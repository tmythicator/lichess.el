#+TITLE: lichess.el
#+OPTIONS: toc:nil num:nil
#+AUTHOR: Alexandr Timchenko

A minimal Emacs client for the [[https://lichess.org/api][Lichess API]].

* Showcase
Here is a quick demonstration of browsing Lichess TV and watching a live game:
[[file:demo/lichess-tv.gif]]

* Features
- TV
  - [X] Live Lichess TV channels list (=M-x lichess-tv=)
  - [X] Select a game with =RET= to watch it live inside Emacs.
  - [X] Inspect any TV channel (=M-x lichess-tv-debug=)
- Live Game Watcher
  - [X] Stream any Lichess game by its ID (M-x lichess-game-watch).
  - [X] Real-time board updates via the NDJSON stream.
  - [X] Full game history navigation with =p= (previous) and =n= (next).
  - [X] Switch board perspective with =v= (auto, white, black).
- Core
  - [X] Interactive umbrella dispatcher (=M-x lichess=)
  - [X] Diagnostics: token + active games (=M-x lichess-diagnose=)
- FEN / Board
  - [X] Parse FEN -> internal position struct
  - [X] Render board to Org table (ASCII or Unicode)
  - [X] Header displays side-to-move, castling rights, en passant target, and perspective.
- Roadmap
  - [X] Watch a single game (=lichess-game.el=)
  - [X] Live board stream (NDJSON)
  - [ ] Submit moves and play
  - [ ] MELPA packaging
  - [ ] Puzzles & tactics
  - [ ] Challenge API
* Installation
Clone and add to your load path:
#+begin_src elisp
(add-to-list 'load-path "~/path/to/your/lichess")
(require 'lichess)
#+end_src
* Authentication
Some commands require a personal API token:

1. Go to [[https://lichess.org/account/oauth/token]]
2. Create a token.
3. In Emacs:
#+begin_src elisp
(setq lichess-token "YOUR_TOKEN_HERE")
#+end_src

* Usage
- =M-x lichess= -> main entrypoint, shows dispatcher to all subcommands
  - =TV: channels= -> opens Lichess TV
  - =Diagnose account= -> checks token & active games
  - =(Debug) TV: JSON channels= -> prints raw =/api/tv/channels= list as JSON
  - =(Debug) NDJSON Stream= -> prints raw =/api/stream/game/{game}= information as NDJSON
  - =(Debug) Render FEN position= -> renders chess position by FEN
- =M-x lichess-tv= -> show TV channels list
  - =g= refreshes list
  - =RET= opens game on the current line
- =M-x lichess-tv-debug= ->  dump raw JSON
- =M-x lichess-diagnose= -> check auth and active games

* Development and debugging
- Diagnostics via =M-x lichess-diagnose= (Authorization check, active games)
- Inspect any TV channel with =M-x lichess-tv-debug=

* License
GPL-3.0-or-later See LICENSE for details.